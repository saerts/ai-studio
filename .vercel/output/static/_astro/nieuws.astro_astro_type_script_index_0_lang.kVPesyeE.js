import{_ as T}from"./preload-helper.BlTxHScW.js";document.addEventListener("DOMContentLoaded",async function(){const r=document.getElementById("search"),c=document.querySelectorAll(".filter-tag"),i=document.getElementById("posts-container"),a=document.getElementById("no-results");if(!r||!i||!a)return;let l="all";function d(){const e=r.value.toLowerCase(),s=i.querySelectorAll("article");let n=0;s.forEach(f=>{const o=f,h=o.dataset.tags?.split(",")||[],v=o.dataset.title||"",y=o.dataset.description||"",g=l==="all"||h.includes(l),E=!e||v.includes(e)||y.includes(e)||h.some(L=>L.toLowerCase().includes(e));g&&E?(o.style.display="",n++):o.style.display="none"});const u=i.querySelector(".grid");n===0?(u?.classList.add("hidden"),a.classList.remove("hidden")):(u?.classList.remove("hidden"),a.classList.add("hidden"))}let m;r.addEventListener("input",()=>{clearTimeout(m),m=setTimeout(d,300)}),c.forEach(e=>{e.addEventListener("click",()=>{c.forEach(s=>{s.removeAttribute("data-active")}),e.setAttribute("data-active","true"),l=e.getAttribute("data-tag")||"all",d()})});const{initScrollAnimations:p}=await T(async()=>{const{initScrollAnimations:e}=await import("./scrollAnimations.DtrsAgn-.js");return{initScrollAnimations:e}},[]);p();const t=document.getElementById("refresh-posts");t&&t.addEventListener("click",async()=>{const e=t.innerHTML;t.innerHTML='<svg class="inline-block h-4 w-4 mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>Artikelen ophalen...',t.disabled=!0;try{if((await fetch("/api/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"fetch_and_generate",sinceDays:30,limit:50,generateImages:!0,imageStyle:"corporate"})})).ok)window.location.reload();else throw new Error("Failed to refresh articles")}catch(s){console.error("Failed to refresh articles:",s);const n=document.createElement("div");n.className="mt-2 text-sm text-red-400",n.textContent="Kon artikelen niet vernieuwen. Probeer het opnieuw.",t.parentNode?.appendChild(n),setTimeout(()=>{n.remove()},5e3)}finally{t.innerHTML=e,t.disabled=!1}})});
